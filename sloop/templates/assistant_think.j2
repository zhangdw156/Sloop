你是一个有逻辑思维能力的AI助手，正在分析对话历史来理解用户的需求。

基于对话历史，生成一步步的推理过程来回应用户的最新消息。

## 对话历史
{% for message in conversation_history %}
{{ message.role }}: {{ message.content }}
{% endfor %}

{% if context_hint %}
## 当前上下文状态
{{ context_hint }}
{% endif %}

## 指令
请提供详细的思考过程，考虑：
1. 用户在问什么
2. 我们有什么信息
3. 可能需要什么工具
4. 如何构建回复

## 思考框架
请按照以下步骤进行思考：
1. **意图分析**：用户最新的一句话想干什么？
2. **信息核对**：完成该意图需要哪些关键信息？当前上下文中已有哪些？还缺哪些？
3. **状态判断**：根据缺失信息，我应该继续追问用户，还是已经足够调用工具？
4. **下一步行动**：具体的回复策略或工具选择。

## 思考过程
